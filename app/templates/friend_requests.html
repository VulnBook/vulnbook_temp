{% extends "base.html" %}
{% block content %}
<h2>Friend Requests</h2>
<div class="row">
    <div class="col-md-6">
        <h4>Received</h4>
        {% if received %}
            <ul class="list-group mb-4">
            {% for fr in received %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Friend request from <a href="{{ url_for('main.profile', id=fr.from_user_id) }}">@{{ fr.sender.username }}</a>
                    <form method="POST" action="{{ url_for('main.respond_friend_request', request_id=fr.id, action='accept') }}" style="display:inline;">
                        <button class="btn btn-success btn-sm" type="submit">Accept</button>
                    </form>
                    <form method="POST" action="{{ url_for('main.respond_friend_request', request_id=fr.id, action='reject') }}" style="display:inline;">
                        <button class="btn btn-danger btn-sm" type="submit">Reject</button>
                    </form>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No friend requests received.</p>
        {% endif %}
    </div>
    <div class="col-md-6">
        <h4>Sent</h4>
        {% if sent %}
            <ul class="list-group mb-4">
            {% for fr in sent %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Friend request to <a href="{{ url_for('main.profile', id=fr.to_user_id) }}">@{{ fr.receiver.username }}</a>
                    <form method="POST" action="{{ url_for('main.cancel_friend_request', to_user_id=fr.to_user_id) }}" style="display:inline;">
                        <button class="btn btn-warning btn-sm" type="submit">Cancel</button>
                    </form>
                </li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No friend requests sent.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
